{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Hannah\\\\Documents\\\\EC-Utbildning\\\\ecu-backend\\\\ecu-backend-typescript\\\\src\\\\contexts\\\\ProductCRUDContext.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useContext, createContext } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ProductCRUDContext = /*#__PURE__*/createContext(null);\nexport const useProductContext = () => {\n  _s();\n  return useContext(ProductCRUDContext);\n};\n_s(useProductContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nconst ProductProvider = _ref => {\n  _s2();\n  let {\n    children\n  } = _ref;\n  const baseUrl = 'http://localhost:5000/api/products';\n  const defaultValues = {\n    articleNumber: 0,\n    name: '',\n    category: '',\n    price: 0,\n    imageName: ''\n  };\n  const [product, setProduct] = useState(defaultValues);\n  const [products, setProducts] = useState([]);\n  const create = async e => {\n    e.preventDefault();\n    const result = await fetch(`${baseUrl}`, {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(product)\n    });\n    if (result.status === 201) {\n      setProduct(defaultValues);\n    } else {\n      console.log('error');\n    }\n  };\n  const get = async articleNumber => {\n    const result = await fetch(`${baseUrl}/${articleNumber}`, {});\n    if (result.status === 201) {\n      setProduct(await result.json());\n    }\n  };\n  const getAll = async () => {\n    const result = await fetch(`${baseUrl}`, {});\n    if (result.status === 200) {\n      setProducts(await result.json());\n    }\n  };\n  const update = async e => {\n    e.preventDefault();\n    const result = await fetch(`${baseUrl}/${product.articleNumber}`, {\n      method: 'put',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(product)\n    });\n    if (result.status === 200) {\n      setProduct(await result.json());\n    }\n  };\n  const remove = async articleNumber => {\n    const result = await fetch(`${baseUrl}/${articleNumber}`, {\n      method: 'delete'\n    });\n    if (result.status === 204) {\n      setProduct(defaultValues);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(ProductCRUDContext.Provider, {\n      value: {\n        product,\n        setProduct,\n        products,\n        create,\n        get,\n        getAll,\n        update,\n        remove\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 9\n  }, this);\n};\n_s2(ProductProvider, \"q3b3/0DxSqt37sjh8TPoihNZ5Zo=\");\n_c = ProductProvider;\nvar _c;\n$RefreshReg$(_c, \"ProductProvider\");","map":{"version":3,"names":["React","useState","useContext","createContext","ProductCRUDContext","useProductContext","ProductProvider","children","baseUrl","defaultValues","articleNumber","name","category","price","imageName","product","setProduct","products","setProducts","create","e","preventDefault","result","fetch","method","headers","body","JSON","stringify","status","console","log","get","json","getAll","update","remove"],"sources":["C:/Users/Hannah/Documents/EC-Utbildning/ecu-backend/ecu-backend-typescript/src/contexts/ProductCRUDContext.tsx"],"sourcesContent":["import React, {useState, useContext, createContext, Children, FormEvent } from 'react'\r\nimport {ProductItem2} from '../models/ProductModel'\r\n\r\ninterface IProductProviderProps {\r\n    children: any\r\n}\r\n\r\nexport interface IProductContext {\r\n    product: ProductItem2,\r\n    setProduct: React.Dispatch<React.SetStateAction<ProductItem2>>\r\n    products: ProductItem2[],\r\n    create: (e: React.FormEvent) => void,\r\n    get: (articleNumber:number) => void,\r\n    getAll: () => void,\r\n    update: (e: React.FormEvent) => void,\r\n    remove: (articleNumber:0) => void\r\n}\r\n\r\nexport const  ProductCRUDContext = createContext<IProductContext | null >(null)\r\nexport const useProductContext = () => {\r\n    return useContext(ProductCRUDContext)\r\n}\r\n\r\n\r\nconst ProductProvider = ({children}: IProductProviderProps) => {\r\n    const baseUrl = 'http://localhost:5000/api/products'\r\n\r\n    \r\n    const defaultValues: ProductItem2 = {articleNumber: 0, name: '',  category: '', price: 0, imageName:''}\r\n\r\n    const [product, setProduct] = useState<ProductItem2>(defaultValues)\r\n    const [products, setProducts] = useState<ProductItem2[]>([])\r\n\r\n    const create = async (e: React.FormEvent) => {\r\n        e.preventDefault()\r\n\r\n        const result = await fetch (`${baseUrl}`, {\r\n            method: 'post',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify(product)\r\n        })\r\n\r\n        if (result.status=== 201) {\r\n            setProduct(defaultValues)\r\n        } else {\r\n            console.log('error')\r\n        }\r\n    }\r\n\r\n    const get = async (articleNumber : number) => {\r\n\r\n        const result = await fetch (`${baseUrl}/${articleNumber}`, {})\r\n           \r\n        if (result.status=== 201) {\r\n                setProduct(await result.json())\r\n            }\r\n\r\n    }\r\n\r\n\r\n    const getAll = async () => {\r\n        const result = await fetch (`${baseUrl}`, {})\r\n           \r\n        if (result.status=== 200) {\r\n                setProducts(await result.json())\r\n            }\r\n\r\n    }\r\n\r\n    const update = async (e: React.FormEvent) => {\r\n        e.preventDefault()\r\n\r\n        const result = await fetch (`${baseUrl}/${product.articleNumber}`, {\r\n            method: 'put',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify(product)\r\n        })\r\n\r\n        if (result.status=== 200) {\r\n           setProduct(await result.json())\r\n        }\r\n    }\r\n\r\n\r\n    const remove = async (articleNumber: number) => {\r\n        const result = await fetch (`${baseUrl}/${articleNumber}`, {\r\n            method: 'delete'\r\n        })\r\n\r\n        if (result.status=== 204) {\r\n           setProduct(defaultValues)\r\n        }\r\n    }\r\n\r\n\r\n     \r\n    return (\r\n        <div>\r\n            {/* value säger vad som ska vara tillgängligt för children */}\r\n            <ProductCRUDContext.Provider value={{product, setProduct, products, create, get, getAll, update, remove}}>\r\n                {children}\r\n            </ProductCRUDContext.Provider>\r\n        </div>\r\n      )\r\n\r\n\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}